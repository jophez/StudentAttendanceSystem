# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Build & Development Commands

### Building the Solution
```bash
dotnet build StudentAttendanceSystem.sln
```

### Running the Applications
- **Main WinForms App**: `dotnet run --project StudentAttendanceSystem.WinForms`
- **Windows Service**: `dotnet run --project StudentAttendanceSystem.Service`

### Database Setup
Execute SQL scripts in this exact order:
1. `Database/01_CreateDatabase.sql` - Creates StudentAttendanceDB
2. `Database/02_CreateTables.sql` - Creates all tables with indexes
3. `Database/03_StoredProcedures.sql` - Creates CRUD stored procedures
4. `Database/04_SampleData.sql` - Inserts sample data
5. `Database/05_SMS_StoredProcedures.sql` - SMS-related procedures

## Architecture Overview

### Project Structure
- **StudentAttendanceSystem.Core**: Domain models, interfaces, and services
  - Models: Student, Guardian, User, AttendanceRecord, SMSLog, SMSConfiguration
  - Interfaces: IRFIDReader, ISMSService
  - Services: RFIDService, NotificationService, SemaphoreSMSService
- **StudentAttendanceSystem.Data**: Data access layer using Repository pattern
  - DatabaseConnection with SQL Server integration
  - Repositories for each entity using ADO.NET with stored procedures
- **StudentAttendanceSystem.WinForms**: Main Windows Forms application
  - Forms: LoginForm, MainForm, StudentDetailForm, SMSConfigurationForm, etc.
- **StudentAttendanceSystem.Service**: Windows Service for external attendance display

### Key Design Patterns
- **Repository Pattern**: All data access through repositories
- **Separation of Concerns**: Clear layer separation (Core, Data, UI, Service)
- **Role-Based Access Control**: Administrator vs Regular User permissions

### Database Architecture
- **Primary Database**: StudentAttendanceDB (SQL Server)
- **Connection String**: Located in `DatabaseConnection.cs:21`
- **Data Access**: ADO.NET with stored procedures for all CRUD operations
- **Key Tables**: Users, Students, Guardians, AttendanceRecords, SMSLogs, SMSConfiguration, RFIDConfiguration

### Authentication & Security
- SHA-256 password hashing
- Role-based permissions (Administrator/Regular User)
- Default credentials: admin/admin123, user1/user123

## Key Features & Integrations

### RFID Integration
- USB RFID reader support via `USBRFIDReader.cs`
- One RFID code per student (generated by system)
- Real-time attendance tracking

### SMS Notifications
- **Provider**: Semaphore API integration
- **Configuration**: SMSConfiguration table stores API credentials
- **Service**: SemaphoreSMSService handles message sending
- **Logging**: All SMS activity logged in SMSLogs table

### Windows Service Component
- External attendance display with real-time clock
- Automatic SMS notifications to guardians
- Student verification and attendance logging

## Development Notes

### Database Connection
- Default connection string uses Integrated Security with localhost SQL Server
- TrustServerCertificate=true for development
- Modify `DatabaseConnection.GetDefaultConnectionString()` for different environments

### Technology Stack
- **.NET 8** with Windows Forms
- **SQL Server** with ADO.NET
- **System.Management** package for hardware integration

### Important File Locations
- Connection string: `StudentAttendanceSystem.Data/DatabaseConnection.cs:21`
- Main entry points: `Program.cs` files in WinForms and Service projects
- SMS configuration: `StudentAttendanceSystem.Core/Models/SMSConfiguration.cs`